<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Instructions for Writing Tutorials • all.primer.tutorials</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Instructions for Writing Tutorials">
<meta property="og:description" content="all.primer.tutorials">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">all.primer.tutorials</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/assignment_management.html">Assignment Management</a>
    </li>
    <li>
      <a href="../articles/class_management.html">Class Management</a>
    </li>
    <li>
      <a href="../articles/details.html">Technical Details</a>
    </li>
    <li>
      <a href="../articles/instructions.html">Instructions for Writing Tutorials</a>
    </li>
    <li>
      <a href="../articles/oauth_walkthrough.html">Google OAuth App Walkthrough</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ppbds/all.primer.tutorials/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Instructions for Writing Tutorials</h1>
                        <h4 data-toc-skip class="author">David Kane</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ppbds/all.primer.tutorials/blob/HEAD/vignettes/instructions.Rmd" class="external-link"><code>vignettes/instructions.Rmd</code></a></small>
      <div class="hidden name"><code>instructions.Rmd</code></div>

    </div>

    
    
<!-- Tutorial answers should require the smallest incremental number of characters for students to type. That is how you know that your learning curve is shallow. geom_smooth() example. -->
<!-- Get rid of screenshot examples. Instead use the new file = code chunk option to read in the actual files which are used as part of the macro. Is this even possible? -->
<p><em>There are no questions here. There are only
instructions.</em></p>
<p><em>Tutorials are not challenging. They are
confidence-building.</em></p>
<p><em>Every word matters. Never waste a student’s time.</em></p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Imagine the <em>shallowest</em> possible learning curve. Almost every
student should be able to answer almost every Exercise, albeit perhaps
with the help of the Hint. There are no hard questions. In fact, there
really aren’t <em>questions</em> at all. Instead, there are
<em>instructions</em>: Do one thing, then the next, and then the
next.</p>
<p>Assume that you are giving the student a private lesson. You ask them
a question. They give you an answer. What would you say to them next?
What do you want to teach them, given that context?</p>
<p>There are a million little bits of R knowledge which we might provide
to students: tips, tricks, cool packages, fun websites, et cetera. We
don’t have time to mention all of them. The art of teaching is to,
first, decide which 10,000 bits are the most important to mention and
second, figure out the best time at which to mention them. Tutorials are
a key for doing that mentioning. Which bits do we mention and where do
we mention them?</p>
<p>We can only demonstrate a tiny percentage of all the packages in the
world, but we can certainly at least mention the existence of dozens
more. Within the packages we use, we can only demonstrate some of the
functions; but we can mention more of use. Among the functions we use,
we can only show some of the arguments; but we can discuss others.</p>
<p>The most important parts of the “knowledge drops” with which we
pepper these tutorials are, first, the packages/functions/arguments
which we mention without demonstrating, and second, links to high
quality resources.</p>
<p>We are building a “<a href="https://ricomariani.medium.com/the-pit-of-success-cfefc6cb64c8" class="external-link">pit
of success</a>.” Generally, students don’t do the assigned reading, at
least in a large class. However, they will complete required work. They
will do the assigned tutorials. <em>Our promise: If you complete the
tutorials, you will become a data scientist. There is simply no way not
to.</em></p>
<p>There will often be several tutorials associated with a given
chapter. The first is an “Overview” tutorial which follows closely along
with the words and examples in the chapter itself. Someday, we will <a href="https://github.com/tinystats/teacups-giraffes-and-statistics" class="external-link">put
those exercises directly</a> into the <em>Primer</em> itself, so keeping
the two in sync makes sense. We can group other tutorials into three
broad categories. First, some tutorials go into more detail about
certain aspects of the chapter. Second, some tutorials provide further
examples/extensions of the main theme of the chapter as a whole. Third,
the remaining tutorials cover a topic — like Quarto Websites or Tables —
which has no necessary connection to the chapter itself.</p>
<p>A tutorial should take about 1 to 2 hours. Depending on the topic
difficulty, that might be around 100 to 200 or so Exercises. Some
tutorials might be only 30 minutes, especially if the topic is not that
important.</p>
</div>
<div class="section level2">
<h2 id="set-up">Set Up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h2>
<p>To make additions to <strong>all.primer.tutorials</strong>, follow
the <a href="https://ppbds.github.io/primer/set-up.html" class="external-link">set up
guide</a> to fork/download a copy of <a href="https://github.com/PPBDS/all.primer.tutorials" class="external-link">PPBDS/all.primer.tutorials</a>.
Press “Install and Restart” from the “Build” tab to ensure that you have
the latest copy installed. (You should not do
<code>remotes::install_github("PPBDS/all.primer.tutorials")</code> since
that gets the version from Github. You want the version from your
computer so that you get any changes you make.)</p>
<p>Tutorials themselves live in <code>inst/tutorials</code>. Each
directory name is a combination of a prefix number (which indicate the
week/chapter with which a tutorial is associated and the order in which
to do it) and a name, which corresponds to the <code>id'</code> of the
tutorial. Within each directory is a <code>tutorial.Rmd</code> file and,
sometimes, other material like an <code>images</code> and
<code>data</code> directory. The prefix number determines the order in
which tutorials appear in the Tutorial pane. Take for example the
tutorial that says <code>052</code>. The “05” indicates that this is a
Week 5 tutorial, and the “2” indicates that it is the second tutorial of
that week.</p>
<p>To create a new tutorial, use
<code>File -&gt; New File -&gt; R Markdown</code>. Choose the “From
Template” option and then select “Primer Tutorial.” The “<a href="details.html">Technical Details</a>” vignette provides an overview
of the default material in the template. Change the <code>title</code>,
<code>id</code>, and <code>description</code> parts of the YAML header.
The title may include spaces. The <code>id</code> should be exactly the
same as the <code>title</code>, but all in lower case and with spaces
and other special characters replaced with dashes. One sentence is
enough for the description.</p>
<p>The <code>id</code> value is important. It should be the same as the
directory in which the tutorial is located, but with the leading numbers
removed. It is used for the name of the answer file which students save
at the end of the tutorial.</p>
</div>
<div class="section level2">
<h2 id="structure">Structure<a class="anchor" aria-label="anchor" href="#structure"></a>
</h2>
<p>The beginning of every tutorial includes the
<code>copy-code-chunk</code> and the <code>info-section</code> code
chunks. The tutorial is then divided into different <em>Sections</em>
that appear as side panels. The first section is the “Introduction” and
the last is the “Summary”.</p>
<p>Within the Sections after the Introduction and before the Summary,
there are a series of <em>Exercises</em> which can include writing code
or writing text. At the end of the tutorial, there is a
<code>download-answers</code> code chunk which provides students with
instructions on how to download a copy of their answers in either html
or rds format.</p>
<p>The Introduction section is two to four sentence about the main
topics covered in the tutorial. Why are we here? What will students get
out of giving you 90 minutes of their lives? What functions/techniques
will they learn?</p>
<p>The Summary section is two to four sentences which bring the lessons
of the tutorial together for the student. What do they know now that
they did not know before? What are the most important
functions/techniques covered? It’s completely OK if this is very similar
to the Introduction. You made a promise as to what they would learn. You
kept that promise.</p>
<p>If there are one or two other key resources about the topic of the
tutorial, then those resources should be linked in both the Introduction
and the Summary.</p>
</div>
<div class="section level2">
<h2 id="sections">Sections<a class="anchor" aria-label="anchor" href="#sections"></a>
</h2>
<p>Tutorials are divided into <em>Sections</em> that appear on the side
panel. To create these sections, we include a double hash (##) before
the text for it to show up as a side panel. This is also called the
<em>Section Title</em>. Use <a href="https://apastyle.apa.org/style-grammar-guidelines/capitalization/sentence-case" class="external-link">sentence
case</a>. On the line after the Section Title, put three hashes. This
ensures that students will see the introductory text before they see the
first Exercise.</p>
<p>Each Section begins with a sentence or two about what this group of
Exercises is trying to accomplish. Example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## Interacting with sites with `GET()`</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>###</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>In order to get data from an API, we use the **httr** package. The package is designed to </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>imitate standard HTTP in R. Read more about HTTP <span class="co">[</span><span class="ot">here</span><span class="co">](https://www.jmarshall.com/easy/http/)</span>.</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">### Exercise 1</span></span></code></pre></div>
<p>The link will be formatted correctly once the tutorial is knitted.
Section introductions will often have two parts: the introductory text
as above and a plot which will be replicated in that section of the
tutorial. Those two parts are generally separated by a triple hash.</p>
<p>After the last Exercise in a Section, you should put a triple hash
and then give a two sentence summary about what this Exercise
accomplished. A Section is a 20 minute transfer of knowledge from you to
the student. At the beginning, you mentioned its purpose. Conclude by
tying things back to that original purpose. Often, these “purposes” will
be fairly trivial: You promised to go through an example of a scatter
plot and, in fact, you did. And that is OK! We are not writing poetry.
Not every Section leads to salvation.</p>
<p>One or two high quality links, specifically relevant to this Section,
should be mentioned at either the beginning or end of a Section, unless
the Section is very short.</p>
</div>
<div class="section level2">
<h2 id="exercises">Exercises<a class="anchor" aria-label="anchor" href="#exercises"></a>
</h2>
<p>Each Section is composed of a series of numbered Exercises.</p>
<div class="section level3">
<h3 id="flow">Flow<a class="anchor" aria-label="anchor" href="#flow"></a>
</h3>
<p>Each Exercise should have a <em>flow</em> which requires that
students hit the “Continue” button at least twice.</p>
<ul>
<li><p>Begin with a <em>Start</em> which is a sentence or two of
knowledge and/or the question itself. If the length of the Start text is
longer than one or two lines, then do not place the question code chunk
in the same part. Instead, the Start includes a triple hash, thereby
creating the Continue button. If the length of the text is short enough
that students are willing to read it (at most two sentences), you can
include the answer code chunk in the same part.</p></li>
<li><p>Most of the time there is no need for a triple hash before the
code chunk.</p></li>
<li><p>Do not expect students to read more than two sentences of text at
a time. After two sentences, you almost always want to use a triple hash
in order to create a Continue button.</p></li>
</ul>
<!-- DK: This seems false. Rarely proceeded by a triple hash. --><ul>
<li><p>Then comes the answer code chunk and hint(s), which is sometimes
proceeded by a triple hash. We want students to pause before we ask them
a question. See below for more discussion. This grouping is always
followed by the triple hash. We want students to pause after they have
submitted their answers so that they are more likely to consider the
results of their submission before moving on.</p></li>
<li><p>The last part of an Exercise is the End, our main opportunity to
drop some knowledge. Not sure what knowledge to drop? Look up the help
page for the function which was used to answer the last question. There
is often an argument to that function which was not used in this
Exercise but is worth mentioning to students. There are always related
functions in the help page that are worth mentioning.</p></li>
<li><p>The last part of the Section is another knowledge drop. It is not
another Exercise. It is just a knowledge drop after the last Exercise
which tries to take a broader overview. Again, this can’t be more than a
sentence or two. But it should be more substantive than a simple “Good
job.” Recall the 10,000 items which we want to mention. For example, if
the Section has involved creating a scatter plot, then the last Exercise
will be putting the final touches on that scatter plot. The knowledge
drop should be something about scatter plots in general, not a minor
point about the particular scatter plot which the student has just
created.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="question-types">Question types<a class="anchor" aria-label="anchor" href="#question-types"></a>
</h3>
<p>To create the Exercise headers, you use three hashes. Make sure you
number your exercises – <code>### Exercise 1</code>,
<code>### Exercise 2</code> and so on.</p>
<p>There are two main types of questions. First, we have normal
<em>coding</em> questions. Students write code and press the Run Code
button. Second, we have <em>text</em> questions which require students
to either write prose or to copy/paste the results of running specific
commands. Prose is needed for questions like “Explain the meaning of
potential outcomes.” Copy/paste situations arise when students are
instructed to do something like connect to Github or edit a qmd. We
confirm that the students have completed these questions by having them
issue a command like <code><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files()</a></code> and then copy/pasting the
command and the output. We often abbreviate those instruction using
CP/CR, which stands for <strong>c</strong>opy and <strong>p</strong>aste
the <strong>c</strong>ommand and the <strong>r</strong>esult.</p>
<div class="section level4">
<h4 id="code-questions">Code questions<a class="anchor" aria-label="anchor" href="#code-questions"></a>
</h4>
<p>Here is an example code question:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>### Exercise 2</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>Start your code with `cces`. Use the pipe operator `|&gt;` to add the </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>function `filter()`, selecting the  rows where `state` is equal to </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>"Massachusetts". To set something equal to a value in `filter()` </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>use two equal signs, `==`.</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>```{r filter-2, exercise = TRUE}</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>```{r filter-2-hint-1, eval = FALSE}</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>cces |&gt; </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  filter(state == "...")</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>### </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>`==` is used because it is **checking** whether the value of the </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>variable on the left is equal to the value on the left. See </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>[here](https://stat.ethz.ch/R-manual/R-devel/library/base/html/Comparison.html) </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>for discussion of other relational operators in R.</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>A single equation symbol, `=`, is used to set something equal to </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>something else. </span></code></pre></div>
<p>First, the Start of the Exercise sets the stage. It sometimes teaches
something new, connects to a previous question, provides a useful link,
whatever. If it is long enough, it is followed by a triple hash. If not,
the text continues to the instruction. Most of the time, as above, there
is only the instruction, telling the student, step-by-step, what to
do.</p>
<p>Second, the instruction requires that students write some code. Good
instructions generate results when the student presses Run Code.</p>
<p>Third, any Exercise which requires the copying of code from the prior
Exercise should place the <em>Copy previous code</em> button below the
Exercise code chunk.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;button</span> <span class="er">onclick</span> <span class="ot">=</span> <span class="st">"transfer_code(this)"</span><span class="kw">&gt;</span>Copy previous code<span class="kw">&lt;/button&gt;</span></span></code></pre></div>
<p>Fourth, tutorials should be so simple that 95% of the students can
answer 95% of the questions easily. One way to ensure that is to add a
<em>Hint</em> to almost every coding question.</p>
<p>Hints must always have the same code chunk name as the exercise chunk
for which they are the hint, with a “-hint-n” added at the end. So, if
an exercise code chunk is named “ex-1”, then the hint associated with
that exercise is named “ex-1-hint-1”. A second hint for that same
question would be named “ex-1-hint-2”, and so on.</p>
<p>When you create a hint, always use <code>eval = FALSE</code> within
the parentheses in the code chunk. This is because hints will often
include “…” and other symbols which do not run as correct R code. So, we
need to tell R not to run it or an error will occur during R CMD check.
Example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>```{r ex-1-hint-good, eval = FALSE}</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>This is an example hint. Normally sentences like these </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>would cause an error in R because it is not proper code. </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>However, since we include eval = FALSE in the r-chunk, </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>R ignores all potential errors!</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>```</span></code></pre></div>
<p><strong>You need to wrap the text in a long hint by hand, inserting
the carriage returns yourself.</strong> R will not wrap the text
automatically.</p>
<p>Often, hints look like this</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>```{r ex-1-hint, eval = FALSE}</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>... |&gt; </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  filter(year = ...) |&gt; </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  ...(flights)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>```</span></code></pre></div>
<p>The “…” indicates places where the student needs to insert some code,
a value or a function name. The code in hints should be formatted
correctly.</p>
<p>In the current version (0.11.2) of <strong>learnr</strong>, students
can not see the first hint after clicking through to the next hint. So,
make sure the last hint is the one you most want them to have access to,
i.e., the one which provides the key information. If students can see
the last hint, they should have no reason to consult any earlier
hints.</p>
<p>Hints are <a href="https://community.rstudio.com/t/hints-in-written-questions/108184" class="external-link">only
allowed</a> for coding questions, <strong>not for text
questions</strong>.</p>
<p>Fifth, we separate the code chunks from the End of the Exercise by
using <code>###</code> again.</p>
<p>For simple questions which result in a display of some data, one
approach is to write “You should see that the value of height in row 1
is 23.” This allows the students to know that they are on the right
track. Never hard-code a number. Use R to inline calculate it, even
though this can be a bother.</p>
<p>But, much more common, is to use the End to drop some knowledge,
especially about a function which was used in the answer to this
Exercise, or to one of the previous Exercises in this Section.</p>
</div>
<div class="section level4">
<h4 id="text-questions">Text questions<a class="anchor" aria-label="anchor" href="#text-questions"></a>
</h4>
<p>There are two types of text questions: 1) those that provide the
students with the correct answer, after they have submitted their own
answer, and, 2) those that do not provide an answer. Examples:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>### Exercise 6</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>Explain potential outcomes in about two sentences.</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>```{r definitions-ex-6}</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>question_text(NULL,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    message = "This is where we place the correct answer. It will appear only after </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    students have submitted their own answers. Note that we do not need to wrap the </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    answer text by hand.",          </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    answer(NULL, </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>           correct = TRUE),</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    allow_retry = FALSE,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    incorrect = NULL,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    rows = 6)</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>```</span></code></pre></div>
<p>For the <code>message</code> argument, you should provide an
<strong>excellent</strong> answer. We want to allow students to check
for themselves that they got, more or less, the correct answer. Note how
we set <code>allow_retry</code> to FALSE. This means that, after they
see our answer, students can’t modify their answer. The
<code>rows</code> argument decides how many rows the empty text input
will have.</p>
<p>Always specify (approximately) how much you want students to write.
Reasonable units are: one sentence, two sentences and a paragraph. Pick
one of these three unless you have a good reason not to.</p>
<p>However, for many written questions, we don’t provide an answer, so
we don’t mind if students resubmit. In that case, we use</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>```{r definitions-ex-6}</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  question_text(NULL,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    answer(NULL, correct = TRUE),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    allow_retry = TRUE,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    try_again_button = "Edit Answer",</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    incorrect = NULL,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    rows = 3)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>```</span></code></pre></div>
<p>This format is most commonly used for “process” questions in which we
have told students to do something and then confirm that they have done
it by copying/pasting the result from a command like
<code><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files()</a></code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="tips">Tips<a class="anchor" aria-label="anchor" href="#tips"></a>
</h3>
<p>Each coding exercise should always spit out something. Interactivity
is good! Students should always look at what their code is producing.
There are some situations in which students need to make assignments and
which, because of this, will result in no output when the Run Code
button is pressed. But:</p>
<ul>
<li><p>Do this as little as possible. Why not just make a pipe?</p></li>
<li><p>When you do this, you will need to create the permanent object
yourself because student work in an Exercise code chunk has no lasting
effects. Doing so is annoying and error prone.</p></li>
<li><p>You can have the student not only do the assignment but also, as
part of this same exercise, print out the object. This works
well.</p></li>
</ul>
<p>Follow our coding <a href="https://rpubs.com/dkane/style-guide" class="external-link">Style
Guide</a>, especially spaces around operators like ” = “. Use only one
command per line in pipes and graphics, with proper indentation. Indent
plotting commands after the call to <code>ggplot()</code>.</p>
<p>Do not create an object in one question and then assume that it will
be available in subsequent questions. It won’t be! Each question is
independent of every other question. They live in separate R instances.
The only exception (which we make use of) is that objects created in the
initial <code>setup</code> chunk for the entire tutorial are available
in all later questions, just the way that <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>
commands executed there do not need to be executed again.</p>
<p>Code chunks for Exercises must be named.</p>
<p>Tutorials are knitted/run from the directory in which they are
located. So, if you want to read in a file from a <code>data/</code>
directory, you write:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/myfile.csv"</span><span class="op">)</span></span></code></pre></div>
<p>in an R code chunk, presumably in the global <code>setup</code>
chunk. But, if you try to execute that line of code with CMD-Return, it
will fail because, by default, you are located in the
<code>all.primer.tutorials</code> directory when you start working on
the tutorials. Using <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code> will solve this problem.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; getwd()</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">1</span><span class="co">]</span><span class="at"> "/Users/davidkane/Desktop/projects/all.primer.tutorials"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; setwd("inst/tutorials/031-data-files/")</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; getwd()</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">1</span><span class="co">]</span><span class="at"> "/Users/davidkane/Desktop/projects/all.primer.tutorials/inst/tutorials/031-data-files"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; </span></span></code></pre></div>
<p>CMD-Return will now work because your R session is “located” in the
same location as that from which the tutorial will be run when it is
knitted.</p>
<div class="section level4">
<h4 id="pipes">Pipes<a class="anchor" aria-label="anchor" href="#pipes"></a>
</h4>
<p>The most common type of code questions involve the step-by-step
process of building a pipe, the final output of which is a nice looking
graphic.</p>
<p>You want to first show the graphic that you will create by the end of
the Section. You show it once at the start of the Section and once
before the last Exercise, as a reminder of what the graphic should look
like so students do not need to scroll all the way back up.</p>
<p>You should put the code for the graph in the code chunk at the start
of the Section. Save the code to an object. The name of the object
should have a “_p” suffix, where the “p” stands for “plot.” This way,
you only have to put the object name in the code chunk at the end of the
Section rather than copying the code.</p>
<p>You then build up the graphic, line by line, over a series of
Exercises, providing hints along the way.</p>
</div>
<div class="section level4">
<h4 id="addins">Addins<a class="anchor" aria-label="anchor" href="#addins"></a>
</h4>
<p>We have provided four additions to the Addins menu: “Tutorial Code
Exercise”, “Tutorial Written Exercise (with Answer)”, “Tutorial Written
Exercise (no Answer)” and “Format Tutorial Chunk Labels.” Give them a
try! The first three each insert the skeleton for the next Exercise,
featuring all the key component parts. It even takes a guess at the
correct Exercise number. The “Format Tutorial Chunk Labels” Addin is the
most useful. Always run it before testing your tutorial. It ensures that
all the Exercises are sequentially numbered and that all the code chunk
names are correct and unique.</p>
<p>You can find the addins in the “Addins” tab on the top toolbar of
RStudio. Please make sure that your cursor located at the point at which
you want to insert the new Exercise. You may need to “Install and
Restart” the <strong>all.primer.tutorials</strong> package for the
Addins to appear.</p>
<p><img src="images/code-exercise-1.png" width="75%" height="75%"></p>
<div class="section level5">
<h5 id="tutorial-code-exercise">Tutorial Code Exercise<a class="anchor" aria-label="anchor" href="#tutorial-code-exercise"></a>
</h5>
<p>It creates a new code exercise skeleton with auto-generated chunk id
and exercise title.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>### Exercise 7</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>```{r exercises-7, exercise = TRUE}</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>&lt;button onclick = "transfer_code(this)"&gt;Copy previous code&lt;/button&gt;</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>```{r exercises-7-hint, eval = FALSE}</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>###</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="tutorial-written-exercise-with-and-without-answers">Tutorial Written Exercise (with and without answers)<a class="anchor" aria-label="anchor" href="#tutorial-written-exercise-with-and-without-answers"></a>
</h5>
<p>Both create similar exercise structures with auto-generated chunk id
and exercise title. The difference is that the
<code>question_text()</code> options are filled in differently.</p>
<p>Written Exercise with Answer:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>### Exercise 8</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>```{r exercises-8}</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>question_text(NULL,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    message = "Place correct answer here.",</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    answer(NULL, correct = TRUE),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    allow_retry = FALSE,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    incorrect = NULL,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    rows = 6)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>###</span></code></pre></div>
<p>Written Exercise without Answer:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>### Exercise 9</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>```{r exercises-9}</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>question_text(NULL,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    answer(NULL, correct = TRUE),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    allow_retry = TRUE,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    try_again_button = "Edit Answer",</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    incorrect = NULL,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    rows = 3)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>###</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="format-tutorial-chunk-labels">Format Tutorial Chunk Labels<a class="anchor" aria-label="anchor" href="#format-tutorial-chunk-labels"></a>
</h5>
<!-- DK: Fix this section. Maybe don't use images? -->
<p>An addin that formats all the code chunk labels in the current
Rmd.</p>
<p>It formats the labels of the code and written exercise code chunks as
well as the hints.</p>
<p>Limitations:</p>
<ul>
<li><p>It doesn’t work well with the `r` that shows the entire code
chunk</p></li>
<li><p>The code chunk labels (derived from your section titles) have a
hard cutoff at 20 characters. So please make sure that your Section
Titles are different somewhere in the first 20 characters (including
spaces).</p></li>
</ul>
<p>Before:</p>
<p><img src="images/format-labels-1.png" width="75%" height="75%"></p>
<p>After:</p>
<p><img src="images/format-labels-2.png" width="75%" height="75%"></p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="knowledge-drops">Knowledge Drops<a class="anchor" aria-label="anchor" href="#knowledge-drops"></a>
</h3>
<p>The most difficult part of tutorial creation is writing the
“knowledge drops,” the snippets of wisdom (and the associated links)
which are used at the End of each Exercise. Some advice:</p>
<ul>
<li><p>Do not expect this to be easy! Good knowledge drops are
hard.</p></li>
<li><p>Make them short. Students will not read more than a sentence or
two.</p></li>
<li>
<p>Not sure what knowledge to drop? Look up the help page for one of
the functions used in the Section. Ideally, this will be the function
which was used in this Exercise, but it can be one used a few lines
above. The help page will have two areas of interest:</p>
<ul>
<li>Arguments for the function, some of which will not have been used in
the Section but which are still worth mentioning. A good knowledge drop
will mention this argument and describe when it might be useful.</li>
<li>Related functions. For example, use the “Useful filter functions”
section of the <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">?dplyr::filter</a></code> help page. All of these make
for good knowledge drops! Another example is the “See also” section of
the <code>?arrange</code> help page. We can’t possibly use every R
function in an Exercise, but we can at least describe some of them in
knowledge drops.</li>
</ul>
</li>
<li>
<p>Use high quality links.</p>
<ul>
<li>The second edition of <a href="https://r4ds.hadley.nz/" class="external-link"><em>R for
Data Science</em></a> is amazing. Link to it as often as you can.
Indeed, I think we should link at least once to every subpart of this
book. We want students to look at it as often as possible.</li>
<li>Anything associated with <a href="https://posit.co/" class="external-link">Posit</a>
(formerly named RStudio) is high quality. Examples include sites
associated with <a href="https://www.tidyverse.org/" class="external-link">Tidyverse</a> and
<a href="https://www.tidymodels.org/" class="external-link">Tidymodels</a>.</li>
</ul>
</li>
<li><p>Avoid links to low quality sites like
<code>https://rdrr.io/</code> and
<code>https://www.datamentor.io/</code>. Any site which uses ads should
be avoided.</p></li>
<li>
<p>Links to function documentation is useful. Indeed, we should link
at least once to the documentation for every function which we use. Two
categories:</p>
<ul>
<li>Links to the help pages for base function are tricky. It is not
clear to me which location is the best to use for this purpose. My
suggestion is to use links involving the <code>stat.ethz.ch</code>
server, which is the home base (I think) for the core R
developpers.</li>
<li>Links to functions for functions from the <em>Tidyverse</em> should
use the docs maintained by Posit and located at
<code>tidyverse.github.io</code>. Consider these examples for
<code>[arrange()](https://dplyr.tidyverse.org/reference/arrange.html)</code>
and
<code>[aes(https://tidyverse.github.io/ggplot2-docs/reference/aes.html)]()</code>.</li>
</ul>
</li>
</ul>
<p>Think back to our initial discussion of the</p>
<!-- DK: Everything below is worth re-writing. -->
</div>
</div>
<div class="section level2">
<h2 id="inputs">Inputs<a class="anchor" aria-label="anchor" href="#inputs"></a>
</h2>
<div class="section level3">
<h3 id="tibbles">Tibbles<a class="anchor" aria-label="anchor" href="#tibbles"></a>
</h3>
<p>There are two main sources for tibbles for use in the tutorials.
First, use built-in data sets. Run <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library(primer.data)</a></code> or
<code><a href="https://tidyverse.tidyverse.org" class="external-link">library(tidyverse)</a></code> or any other package. Then, run
<code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code>. This will pull up a list of available data sets.
Note that some of these will be data frames rather than tibbles. Second,
you can store data — either as csv or rds files — in the
<code>data</code> directory of the tutorial, as discussed below.</p>
</div>
<div class="section level3">
<h3 id="using-images">Using images<a class="anchor" aria-label="anchor" href="#using-images"></a>
</h3>
<p>To add images to a tutorial, first make a directory called
<code>images</code> in the folder that contains the
<code>tutorial.Rmd</code>. Store all images for that tutorial there. You
can work with those files in all the usual ways.</p>
<p>Use <code>include_graphics()</code> to add the image into the
document. Include this code in its own chunk, in the place where you
want the image to appear in the tutorial.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>```{r}</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>include_graphics("images/example.png")</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>```</span></code></pre></div>
<p><code>include_graphics()</code> is part of the <code>knitr</code>
package, so you need <code><a href="https://yihui.org/knitr/" class="external-link">library(knitr)</a></code> in the setup code
chunk. Note that you do not need to name these code chunks.</p>
</div>
<div class="section level3">
<h3 id="using-files">Using files<a class="anchor" aria-label="anchor" href="#using-files"></a>
</h3>
<p>Files — most commonly text files or rds files — are handled in a
similar fashion to images. Create a directory called <code>data</code>
in the same directory as the Rmd, just as we do with
<code>images</code>. Any file in <code>data</code> will be available at
run time. (Note that the directory must be named <code>data</code>.
Something like <code>my_data</code> will not work.)</p>
<p>There are two main uses for files in <code>data</code>. First, they
can be used at “compile time” (when the rmd is knit to html) for making
plots or doing anything else. Second, they are available to students in
the exercise code blocks during “run time” (when students are doing the
tutorial).</p>
</div>
<div class="section level3">
<h3 id="permanent-objects">Permanent objects<a class="anchor" aria-label="anchor" href="#permanent-objects"></a>
</h3>
<p>If you need for an R object to be accessible in an Exercise code
chunk, create it in the initial global <code>setup</code> code chunk at
the top of the tutorial.</p>
<!-- DK: More details? -->
<!-- ## Tutorials which require restarts -->
<!-- DK: More details? -->
<!-- There are some tutorials which require either an R restart or (what is more or less the same thing, I think) the creation of a new R project. Clearest examples are: RStudio and Code, Rstudio and Github, and Quarto Websites. The problem arises because restarting R or creating a new R project causes R to terminate the tutorial. That is fine when working on a local machine, since the tutorial answers are saved and you can just restart the tutorial. But it does not (alway? ever?) work in the cloud. Restarting a tutorial which you terminated causes an error in the Cloud. -->
<!-- So, for these three tutorials and all others, we should explicitly have students create two RStudio instances, one in which they are doing the tutorial and one in which they are following the tutorial's instructions, instructions which will often require restarts and/or new projects. -->
</div>
</div>
<div class="section level2">
<h2 id="check-tutorial-functionality">Check tutorial functionality<a class="anchor" aria-label="anchor" href="#check-tutorial-functionality"></a>
</h2>
<div class="section level3">
<h3 id="simple-test">Simple test<a class="anchor" aria-label="anchor" href="#simple-test"></a>
</h3>
<p>The simplest way to test the Rmd which you are working on is
with:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rmarkdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">render</a></span><span class="op">(</span><span class="st">"inst/tutorials/02-terminal/tutorial.Rmd"</span><span class="op">)</span></span></code></pre></div>
<p>This assumes that you are located in the main directory of
<strong>all.primer.tutorials</strong>, as you normally would be. I am
not sure if this will catch all potential errors, but it will catch many
issues, and it is very quick. Replace <code>02-terminal</code> with the
appropriate directory.</p>
<p>You can also just hit the “Run Document” button. I think that this is
the (exact?) same thing has <code>render()</code>.</p>
</div>
<div class="section level3">
<h3 id="test-before-submitting-a-pr">Test before submitting a PR<a class="anchor" aria-label="anchor" href="#test-before-submitting-a-pr"></a>
</h3>
<p>Once you are done writing your tutorial, you need to make sure it
works before you submit a pull request.</p>
<ol style="list-style-type: decimal">
<li><p>Click “Install and Restart” from the Build tab. Then, hit “Start
Tutorial” in the Tutorial tab. This mimics the experience that users
will have. This will catch some common errors, like having two code
chunks with the same name. (I am not sure if this does more or less than
the simple test as above.)</p></li>
<li><p>Do a full test, which means running R CMD check. Go to the top
right window of RStudio. Click the Build pane and hit the “Check” button
(with the green check mark). You will then see a bunch of code and tests
running. Make sure it says “OK” next to “testthat”. You should always
run this before submitting a pull request.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="what-to-do-if-r-cmd-check-fails">What to do if R CMD check fails<a class="anchor" aria-label="anchor" href="#what-to-do-if-r-cmd-check-fails"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Read the error message at the bottom of the Build pane. You want
to see “R CMD check succeeded.” If not, there is a problem. The error
message will often provide a clue as to where in your code the error
occurred.</p></li>
<li><p>If that error message is not detailed enough, go to the
<code>all.primer.tutorials.rcheck</code> folder, which should be located
in the same directory as <code>all.primer.tutorials</code> on your
computer. This is a folder created by the R CMD check process, and it
will be automatically deleted if the check process succeeds. If the
process fails, the <code>all.primer.tutorials.rcheck</code> folder stays
around so that you can examine it. The key file is
<code>testthat.Rout.fail</code>, which should be in the
<code>tests</code> directory. It has more details.</p></li>
</ol>
<p>The most common source of errors is something wrong with the hint
code chunks, which are not evaluated when you just Run Document. Make
sure the <code>eval = FALSE</code> argument is set in the code chunk for
all hints. Check also to see if you included the Information and
Submission lines.</p>
</div>
<div class="section level3">
<h3 id="difficult-bugs">Difficult bugs<a class="anchor" aria-label="anchor" href="#difficult-bugs"></a>
</h3>
<ul>
<li><p>Note that R CMD check does not seem to catch cases in which you
library() a package in a tutorial but that package is not in
DESCRIPTION. But such a discrepancy will cause an error on Github
Actions because, there, you only have access to packages that have been
installed as part of that test.</p></li>
<li><p>Be careful of the way that Github is sloppy in how it deals with
capitalization changes, especially when you change the name of a file.
For example, you might first commit a file named <code>Rproj.png</code>.
Later, you decide to change all file names for images to all lower case.
So, you change the name of the file to <code>rproj.png</code>. Commit
and push. Everything is great, right? No! Even if Github shows you the
new file name it might still have that file as <code>Rproj.png</code>
internally. This will cause errors when your run your checks on
Github:</p></li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Error:</span> Cannot find the file<span class="er">(</span><span class="ex">s</span><span class="kw">)</span><span class="bu">:</span> <span class="st">"images/rproj.png"</span></span></code></pre></div>
<p>But the file is there! You can see it! The tests work on your local
machine. The easiest solution is to delete the file (and commit that
change). And then change the name of the file to something else and use
it.</p>
<ul>
<li><p>R CMD check will test that all tutorials have the default
sections exactly as they are in the Primer Tutorial template. So, use
the template. If either the “Introduction” or “Download answers”
sections are missing, R CMD check will return something like “From
test-components.R. Submission (or Information) lines missing from
file”.</p></li>
<li><p>Be wary about the <code>.Rbuildignore</code> file. It is
important, but dangerous. In particular, it ensures that only specified
files are copied over to the R package. Specifically, within the
<code>/inst/tutorials/</code> directories, only *Rmd files and all the
files in <code>images</code> and <code>data</code> are installed. We
might want to revisit this to, instead, specify files which are not
copied over.</p></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="http://davidkane.info" class="external-link">David Kane</a>, Becca Gill, Miriam Heiss.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
